# 清理 (Clear-and-minimize)
##目的
清理容器，并将容器容量调到最低。

Clear-and-minimize是一种软件工程实践，旨在简化和清理代码库以提高可维护性和可读性。它包括两个主要方面：

1. 清理：清理代码库中的冗余和不必要的代码、注释和文档，以及任何与代码库无关的文件和目录。这有助于减少代码库的体积和复杂度，并提高代码库的可读性和可维护性。
2. 最小化：在必要的情况下，简化代码库中的代码和架构。这可以通过消除不必要的依赖关系、简化算法和数据结构、合并重复代码等方式来实现。这有助于减少代码库的复杂度和维护成本，并提高代码库的可读性和可维护性。

Clear-and-minimize是一种持续性实践，应该随着时间的推移不断地应用于代码库。它可以帮助软件团队保持代码库的健康和可维护性，并提高软件开发的效率和质量。

##别名
swap with temporary idiom。

##动机
标准库中的容器常常会分配超出实际占用的容量，这样当容量不断增加空间时就有了优化空间。换言之，容器总是会多出来一些不必要的容量，也就造成了内存浪费。本惯用法就是用于清空容器，并将容量置为最小化的0，达到节省内存的目标。

##解决方案及示例
其实很简单，就像下面这样：
```
std::vector <int> v;
//... 在v上发生调用一批push_back，然后就会出现一批remove操作。
std::vector<int>().swap (v);
```
第一行初始化实例，它会保证处于最小的0大小状态。最后一行使用一个临时的vector与v应用non-throwing swap惯用法，这个非常有效。交换后，临时对象就会被释放掉。

自从C++11后，一些容器都定义了`shrink_to_fit()`方法，它可以没有任何约束地将容器容量降到所需要的size。

##已知的应用

##相关的惯用法
* Shrink to fit
* Non-throwing swapping

##参考
* [Programming Languages -- C++](http://open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2800.pdf) (Draft Standard)
